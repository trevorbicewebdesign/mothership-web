"use strict";function _regeneratorRuntime(){"use strict";function s(n,t,e){return Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}),n[t]}function l(o,t,e,r){var n=t&&t.prototype instanceof f?t:f,i=Object.create(n.prototype),a=new x(r||[]);return O(i,"_invoke",{value:E(o,e,a)}),i}function m(n,t,e){try{return{type:"normal",arg:n.call(t,e)}}catch(e){return{type:"throw",arg:e}}}function f(){}function h(){}function b(){}function C(n){["next","throw","return"].forEach(function(o){s(n,o,function(e){return this._invoke(o,e)})})}function _(n,o){function s(e,r,d,i){var a=m(n[e],n,r);if("throw"!==a.type){var l=a.arg,p=l.value;return p&&"object"==typeof p&&t.call(p,"__await")?o.resolve(p.__await).then(function(e){s("next",e,d,i)},function(e){s("throw",e,d,i)}):o.resolve(p).then(function(e){l.value=e,d(l)},function(e){return s("throw",e,d,i)})}i(a.arg)}var d;O(this,"_invoke",{value:function(a,t){function e(){return new o(function(n,e){s(a,t,n,e)})}return d=d?d.then(e,e):e()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if(n==="executing")throw Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:A,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=k(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var d=m(t,e,r);if("normal"===d.type){if(n=r.done?"completed":"suspendedYield",d.arg===c)continue;return{value:d.arg,done:r.done}}"throw"===d.type&&(n="completed",r.method="throw",r.arg=d.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(n===A)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=A,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),c;var o=m(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,c;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=A),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function w(n){var t={tryLoc:n[0]};1 in n&&(t.catchLoc=n[1]),2 in n&&(t.finallyLoc=n[2],t.afterLoc=n[3]),this.tryEntries.push(t)}function B(n){var t=n.completion||{};t.type="normal",delete t.arg,n.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function I(n){if(n||""===n){var e=n[L];if(e)return e.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,a=function e(){for(;++r<n.length;)if(t.call(n,r))return e.value=n[r],e.done=!1,e;return e.value=A,e.done=!0,e};return a.next=a}}throw new TypeError(typeof n+" is not iterable")}_regeneratorRuntime=function(){return T};var A,T={},e=Object.prototype,t=e.hasOwnProperty,O=Object.defineProperty||function(n,t,e){n[t]=e.value},n="function"==typeof Symbol?Symbol:{},L=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",r=n.toStringTag||"@@toStringTag";try{s({},"")}catch(e){s=function(n,t,e){return n[t]=e}}T.wrap=l;var c={},a={};s(a,L,function(){return this});var i=Object.getPrototypeOf,d=i&&i(i(I([])));d&&d!==e&&t.call(d,L)&&(a=d);var u=b.prototype=f.prototype=Object.create(a);return h.prototype=b,O(u,"constructor",{value:b,configurable:!0}),O(b,"constructor",{value:h,configurable:!0}),h.displayName=s(b,r,"GeneratorFunction"),T.isGeneratorFunction=function(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},T.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,r,"GeneratorFunction")),e.prototype=Object.create(u),e},T.awrap=function(e){return{__await:e}},C(_.prototype),s(_.prototype,o,function(){return this}),T.AsyncIterator=_,T.async=function(e,t,r,n,o){void 0===o&&(o=Promise);var s=new _(l(e,t,r,n),o);return T.isGeneratorFunction(t)?s:s.next().then(function(e){return e.done?e.value:s.next()})},C(u),s(u,r,"Generator"),s(u,L,function(){return this}),s(u,"toString",function(){return"[object Generator]"}),T.keys=function(o){var a=Object(o),e=[];for(var t in a)e.push(t);return e.reverse(),function n(){for(;e.length;){var o=e.pop();if(o in a)return n.value=o,n.done=!1,n}return n.done=!0,n}},T.values=I,x.prototype={constructor:x,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=A,this.done=!1,this.delegate=null,this.method="next",this.arg=A,this.tryEntries.forEach(B),!n)for(var e in this)"t"===e.charAt(0)&&t.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=A)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(s){function e(e,t){return l.type="throw",l.arg=s,d.next=e,t&&(d.method="next",d.arg=A),!!t}if(this.done)throw s;for(var d=this,n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n],l=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var p=t.call(r,"catchLoc"),g=t.call(r,"finallyLoc");if(p&&g){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(!p){if(!g)throw Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}}},abrupt:function(n,s){for(var e,d=this.tryEntries.length-1;0<=d;--d)if(e=this.tryEntries[d],e.tryLoc<=this.prev&&t.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var l=e;break}l&&("break"===n||"continue"===n)&&l.tryLoc<=s&&s<=l.finallyLoc&&(l=null);var p=l?l.completion:{};return p.type=n,p.arg=s,l?(this.method="next",this.next=l.finallyLoc,c):this.complete(p)},complete:function(n,t){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&t&&(this.next=t),c},finish:function(n){for(var t,o=this.tryEntries.length-1;0<=o;--o)if(t=this.tryEntries[o],t.finallyLoc===n)return this.complete(t.completion,t.afterLoc),B(t),c},catch:function(a){for(var t,i=this.tryEntries.length-1;0<=i;--i)if(t=this.tryEntries[i],t.tryLoc===a){var s=t.completion;if("throw"===s.type){var d=s.arg;B(t)}return d}throw Error("illegal catch attempt")},delegateYield:function(t,e,o){return this.delegate={iterator:I(t),resultName:e,nextLoc:o},"next"===this.method&&(this.arg=A),c}},T}function asyncGeneratorStep(s,n,t,e,r,o,a){try{var d=s[o](a),i=d.value}catch(e){return void t(e)}d.done?n(i):Promise.resolve(i).then(e,r)}function _asyncToGenerator(i){return function(){var n=this,t=arguments;return new Promise(function(e,r){function o(t){asyncGeneratorStep(d,e,r,o,s,"next",t)}function s(t){asyncGeneratorStep(d,e,r,o,s,"throw",t)}var d=i.apply(n,t);o(void 0)})}}if("undefined"==typeof akeebabackup)var akeebabackup={};"undefined"==typeof akeebabackup.Configuration&&(akeebabackup.Configuration={GUI:{renderOptionLabel:function(e,t,n){var o,r=0!=(null!==(o=t.nolabel)&&void 0!==o?o:0);if(!(r||"hidden"===t.type||"none"===t.type)){var a=document.createElement("label");a.className="col-sm-3 col-form-label",a.setAttribute("for",e),a.innerHTML=t.title,t.description&&(a.setAttribute("rel","popover"),a.setAttribute("title",t.title),a.setAttribute("data-bs-content",t.description)),t.bold&&(a.className+=" fw-bold"),n.appendChild(a)}},renderOptionTypeNone:function(){},renderOptionTypeHidden:function(e,t,n,o,r){var a=document.createElement("input");a.id=e,a.setAttribute("type","hidden"),a.setAttribute("name",e),a.value=t["default"],r.appendChild(a)},renderOptionTypeSeparator:function(e,t,n,o,r){var a,i,s=null!==(a=t.element)&&void 0!==a?a:"div",d=null!==(i=t.content)&&void 0!==i?i:null,l=document.createElement(s);d&&(l.innerHTML=d),r.appendChild(l)},renderOptionTypeInstaller:function(e,t,n,o){var r=document.createElement("select");for(var a in r.className="form-select akeeba-configuration-select-installer",r.id=e,r.setAttribute("name",e),akeebabackup.Configuration.installers)if(akeebabackup.Configuration.installers.hasOwnProperty(a)){var i=akeebabackup.Configuration.installers[a],s=document.createElement("option");s.value=a,s.innerHTML=i.name,t["default"]===a&&s.setAttribute("selected",1),r.appendChild(s)}n.appendChild(r),o.appendChild(n)},renderOptionTypeEngine:function(e,t,n,o){var r=t.subtype;if(null!=akeebabackup.Configuration.engines[r]){var a=e.substr(4,e.length-5),s=document.createElement("div");s.id=a+"_config",s.className="akeeba-engine-options";var d=document.createElement("select");d.className="form-select",d.id=e,d.setAttribute("name",e);var l=akeebabackup.Configuration.engines[r];for(var p in l)if(l.hasOwnProperty(p)){var c=l[p],u=document.createElement("option");u.value=p,u.innerHTML=c.information.title,t["default"]==p&&u.setAttribute("selected","selected"),d.appendChild(u)}akeebabackup.System.addEventListener(d,"change",function(){for(var e={},t=[document.getElementById(a+"_config").querySelectorAll("input"),document.getElementById(a+"_config").querySelectorAll("select")],n=null,o=null,l=null,p=0;p<t.length;p++)if(n=t[p],!!n.length)for(y=0;y<n.length;y++)o=n[y],l=o.id,e[l]=o.value,"checkbox"===o.getAttribute("type")||"radio"===o.getAttribute("type")?e[l]=o.checked:"select"===o.getAttribute("type")&&(e[l]=o.options[o.selectedIndex].value);var c=d.value,u=akeebabackup.Configuration.engines[r][c],g=u.information.title,m={};m[g]=u.parameters,akeebabackup.Configuration.parseGuiData(m,s);var f=s.querySelector("div.card-body");for(f instanceof Element&&f.insertAdjacentHTML("afterbegin","<p class=\"alert alert-info\">"+u.information.description+"</p>"),t=[document.getElementById(a+"_config").querySelectorAll("input"),document.getElementById(a+"_config").querySelectorAll("select")],p=0;p<t.length;p++)if(n=t[p],!!n.length)for(var y=0;y<n.length;y++){o=n[y],l=o.id;var v=e[l];null!=v&&("checkbox"===o.getAttribute("type")||"radio"===o.getAttribute("type")?v?o.setAttribute("checked","checked"):o.removeAttribute("checked"):o.value=v,1===p&&akeebabackup.System.triggerEvent(o,"change"))}akeebabackup.Configuration.initialisePopovers(),"undefined"!=typeof u.information.activation_callback&&window[u.information.activation_callback](u.parameters)});var g=document.createElement("button");g.className="btn btn-secondary btn-sm";var m=document.createElement("span");m.className="fa fa-wrench",g.appendChild(m);var f=document.createElement("span");f.innerHTML=Joomla.Text._("COM_AKEEBABACKUP_CONFIG_UI_CONFIG"),g.appendChild(f),akeebabackup.System.addEventListener(g,"click",function(t){t.preventDefault();var e=new bootstrap.Collapse(s);e.toggle()});var y=document.createElement("div");y.className="input-group",y.appendChild(d),n.appendChild(y),n.appendChild(s),o.appendChild(n),akeebabackup.System.triggerEvent(d,"change")}},renderOptionTypeBrowsedir:function(e,t,n,o){var r=document.createElement("input");r.className="form-control",r.setAttribute("type","text"),r.setAttribute("name",e),r.setAttribute("size","30"),r.id=e,r.value=t["default"];var a=document.createElement("button");a.className="btn btn-secondary",a.setAttribute("title",Joomla.Text._("COM_AKEEBABACKUP_CONFIG_UI_BROWSE"));var i=document.createElement("span");i.className="fa fa-folder-open",a.appendChild(i),akeebabackup.System.addEventListener(a,"click",function(t){return t.preventDefault(),null!=akeebabackup.Configuration.onBrowser&&akeebabackup.Configuration.onBrowser(r.value,r),!1});var s=document.createElement("div");s.className="input-group",s.appendChild(r),s.appendChild(a),n.appendChild(s),o.appendChild(n)},renderOptionTypeEnum:function(e,t,n,o){var r=document.createElement("select");r.className="form-select akeeba-configuration-select-enum",r.id=e,r.setAttribute("name",e);for(var a=t.enumvalues.split("|"),i=t.enumkeys.split("|"),s=0;s<a.length;s++){var d=a[s],l=i[s],p=document.createElement("option");p.value=d,p.innerHTML=l,d===t["default"]&&p.setAttribute("selected","selected"),r.appendChild(p)}"undefined"!=typeof t.onchange&&akeebabackup.System.addEventListener(r,"change",function(){var e=t.onchange;e(r)}),n.appendChild(r),o.appendChild(n)},renderOptionTypeString:function(e,t,n,o){var r=document.createElement("input");r.className="form-control akeeba-configuration-string",r.setAttribute("type","text"),r.id=e,r.setAttribute("name",e),r.value=t["default"],n.appendChild(r),o.appendChild(n)},renderOptionTypePassword:function(e,t,n,o){akeebabackup.Configuration.passwordFields[e]=t["default"];var r=document.createElement("input");r.className="form-control akeeba-configuration-password",r.setAttribute("type","password"),r.id=e,r.setAttribute("name",e),r.setAttribute("size",40),r.value=t["default"],r.setAttribute("autocomplete","off"),n.appendChild(r),o.appendChild(n)},renderOptionTypeInteger:function(e,t,n,o){var r=e.substr(4,e.length-5),a=document.createElement("input");a.id=r,a.setAttribute("name",e),a.setAttribute("type","hidden"),a.value=t["default"];var i=t.min/t.scale,s=t.max/t.scale,d=1/t.scale;1<t.scale?(i=i.toFixed(2),s=s.toFixed(2),d=d.toFixed(2)):(i=Math.trunc(i),s=Math.trunc(s),d=Math.trunc(d));var l=document.createElement("input");l.className="form-control",l.setAttribute("type","number"),l.id=r+"_custom",l.style.display="none",l.setAttribute("min",i),l.setAttribute("max",s),l.setAttribute("step",d),akeebabackup.System.addEventListener(l,"blur",function(){var e=parseFloat(l.value);e*=t.scale,e<t.min?e=t.min:e>t.max&&(e=t.max),a.value=e;var n=e/t.scale;l.value=1<t.scale?n.toFixed(2):Math.trunc(n)});var p=document.createElement("select");p.id=r+"_dropdown",p.setAttribute("name",r+"_dropdown"),p.className="form-select";for(var c=t.shortcuts.split("|"),u=t.scale,g=!1,m=0;m<c.length;m++){var f=c[m],y=f/u,v=document.createElement("option");v.value=f,v.innerHTML=1<u?y.toFixed(2):Math.trunc(y),f==t["default"]&&(v.setAttribute("selected","selected"),g=!0),p.appendChild(v)}var h=document.createElement("option");h.value=-1,h.innerHTML=Joomla.Text._("COM_AKEEBABACKUP_CONFIG_UI_CUSTOM"),g||(h.setAttribute("selected","selected"),l.value=(t["default"]/t.scale).toFixed(2),l.style.display="block"),p.appendChild(h),akeebabackup.System.addEventListener(p,"change",function(){var e=p.value;return"-1"===e?(l.value=(t["default"]/t.scale).toFixed(2),l.style.display="block",void akeebabackup.System.triggerEvent(l,"focus")):void(a.value=e,l.style.display="none")});var b=document.createElement("div");b.className="input-group";var C=t.uom;if(b.appendChild(p),b.appendChild(l),"string"==typeof C&&0!==C.length){var _=document.createElement("span");_.className="input-group-text",_.textContent=C,b.appendChild(_)}n.appendChild(b),n.appendChild(a),o.appendChild(n)},renderOptionTypeBool:function(e,t,n,o){var r=e.match(/[a-z0-9]/ig).join(""),a=document.createElement("div");a.className="btn-group",a.setAttribute("role","group");var i=document.createElement("input");i.type="radio",i.className="btn-check",i.name=e,i.setAttribute("autocomplete","off"),i.id=r+"_1",i.value="1";var s=document.createElement("label");s.className="btn btn-outline-success",s.setAttribute("for",r+"_1"),s.innerText=Joomla.Text._("JYES");var d=document.createElement("input");d.type="radio",d.className="btn-check",d.name=e,d.setAttribute("autocomplete","off"),d.id=r+"_0",d.value=0;var l=document.createElement("label");l.className="btn btn-outline-danger",l.setAttribute("for",r+"_0"),l.innerText=Joomla.Text._("JNO"),0==t["default"]?d.setAttribute("checked","checked"):i.setAttribute("checked","checked"),a.appendChild(i),a.appendChild(s),a.appendChild(d),a.appendChild(l),n.appendChild(a),o.appendChild(n)},renderOptionTypeButton:function(e,t,n,o){var r=o.querySelector("label"),a=t.hook,i=r.innerHTML,s=document.createElement("button");s.id=e,s.innerHTML=i,s.className="btn btn-secondary",r.innerHTML="&nbsp;",akeebabackup.System.addEventListener(s,"click",function(t){t.preventDefault();try{window[a]()}catch(e){}}),n.appendChild(s),o.appendChild(n)},renderOptionTypeUnknown:function(e,t,n,o){var r=e.substr(4,e.length-5),a="akeeba_render_"+t.type,i=window[a];if("function"==typeof i)i(r,t,label,o);else try{window[a](r,t,label,o)}catch(t){}}},engines:{},installers:{},URLs:{},FtpTest:{testConnection:function(e,t,n){var o=document.getElementById("var["+e+"]");if(akeebabackup.Configuration.FtpTest.buttonKey="var["+e+"]",null===o&&(o=document.getElementById(e),akeebabackup.Configuration.FtpTest.buttonKey=e),null===o)return void console.warn("Button "+akeebabackup.Configuration.FtpTest.buttonKey+" not found");o.setAttribute("disabled","disabled");var r={};try{r={isCurl:n?1:0,host:document.getElementById("var["+t+".host]").value,port:document.getElementById("var["+t+".port]").value,user:document.getElementById("var["+t+".user]").value,pass:document.getElementById("var["+t+".pass]").value,initdir:document.getElementById("var["+t+".initial_directory]").value,usessl:document.querySelector("input[name=\""+("var["+t+".ftps]")+"\"]:checked").value,passive:document.querySelector("input[name=\""+("var["+t+".passive_mode]")+"\"]:checked").value,passive_mode_workaround:0}}catch(o){r={isCurl:n?1:0,host:document.getElementById(t+"_host").value,port:document.getElementById(t+"_port").value,user:document.getElementById(t+"_user").value,pass:document.getElementById(t+"_pass").value,initdir:document.getElementById(t+"_initial_directory").value,usessl:document.getElementById(t+"_ftps").checked,passive:document.getElementById(t+"_passive_mode").checked,passive_mode_workaround:0}}if(n)try{r.passive_mode_workaround=document.querySelector("input[name=\"var["+t+".passive_mode_workaround]\"]:checked").value}catch(n){r.passive_mode_workaround=document.getElementById(t+"_passive_mode_workaround").checked}akeebabackup.System.params.AjaxURL=akeebabackup.Configuration.URLs.testFtp,akeebabackup.System.doAjax(r,function(e){var t=document.getElementById(akeebabackup.Configuration.FtpTest.buttonKey);t.removeAttribute("disabled");var n=document.getElementById("testFtpDialogBodyOk"),o=document.getElementById("testFtpDialogBodyFail"),r=document.getElementById("testFtpDialogLabel");if(n.style.display="none",o.style.display="none",!0===(null===e||void 0===e?void 0:e.status))r.textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFIG_DIRECTFTP_TEST_OK"),n.textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFIG_DIRECTFTP_TEST_OK"),n.style.display="block",o.style.display="none";else{var a;r.textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFIG_DIRECTFTP_TEST_FAIL"),o.textContent=null!==(a=null===e||void 0===e?void 0:e.status)&&void 0!==a?a:"???",n.style.display="none",o.style.display="block"}var i=new bootstrap.Modal(document.getElementById("testFtpDialog"),{keyboard:!0,backdrop:!0});i.show()},null,!1,15e3)}},SftpTest:{testConnection:function(e,t,n){var o=document.getElementById("var["+e+"]");akeebabackup.Configuration.SftpTest.buttonKey="var["+e+"]",o.setAttribute("disabled","disabled");var r={isCurl:n?1:0,host:document.getElementById("var["+t+".host]").value,port:document.getElementById("var["+t+".port]").value,user:document.getElementById("var["+t+".user]").value,pass:document.getElementById("var["+t+".pass]").value,initdir:document.getElementById("var["+t+".initial_directory]").value,privkey:document.getElementById("var["+t+".privkey]").value,pubkey:document.getElementById("var["+t+".pubkey]").value};akeebabackup.System.params.AjaxURL=akeebabackup.Configuration.URLs.testSftp,akeebabackup.System.doAjax(r,function(e){var t=document.getElementById(akeebabackup.Configuration.SftpTest.buttonKey);t.removeAttribute("disabled");var n=document.getElementById("testFtpDialogBodyOk"),o=document.getElementById("testFtpDialogBodyFail"),r=document.getElementById("testFtpDialogLabel");if(n.style.display="none",o.style.display="none",!0===(null===e||void 0===e?void 0:e.status))r.textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFIG_DIRECTSFTP_TEST_OK"),n.textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFIG_DIRECTSFTP_TEST_OK"),n.style.display="block",o.style.display="none";else{var a;r.textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFIG_DIRECTSFTP_TEST_FAIL"),o.textContent=null!==(a=null===e||void 0===e?void 0:e.status)&&void 0!==a?a:"???",n.style.display="none",o.style.display="block"}var i=new bootstrap.Modal(document.getElementById("testFtpDialog"),{keyboard:!0,backdrop:!0});i.show()},null,!1,15e3)}},FtpModal:null,passwordFields:{},fsBrowser:{params:{dialogId:"folderBrowserDialog",dialogBodyId:"folderBrowserDialogBody"},modalObject:null},parseConfigData:function(e){akeebabackup.Configuration.engines=e.engines,akeebabackup.Configuration.installers=e.installers,akeebabackup.Configuration.parseGuiData(e.gui)},restoreDefaultPasswords:function(){for(var e in akeebabackup.Configuration.passwordFields)if(akeebabackup.Configuration.passwordFields.hasOwnProperty(e)){var t=akeebabackup.Configuration.passwordFields[e],n=document.getElementById(e);n&&(n.value="WORKAROUND FOR NAUGHTY BROWSERS",n.value=t)}},onBrowser:function(e,t){akeebabackup.Configuration.onBrowserCallback=function(e){t.value=e,"object"==typeof akeebabackup.Configuration.fsBrowser.modalObject&&akeebabackup.Configuration.fsBrowser.modalObject.close?akeebabackup.Configuration.fsBrowser.modalObject.close():"object"==typeof akeebabackup.Configuration.fsBrowser.modalObject&&akeebabackup.Configuration.fsBrowser.modalObject.hide&&akeebabackup.Configuration.fsBrowser.modalObject.hide()};var n=akeebabackup.Configuration.URLs.browser+encodeURIComponent(e),o=document.getElementById(akeebabackup.Configuration.fsBrowser.params.dialogBodyId);o.innerHTML="";var r=document.createElement("iframe");r.setAttribute("src",n),r.setAttribute("width","100%"),r.setAttribute("height",400),r.setAttribute("frameborder",0),r.setAttribute("allowtransparency","true"),o.appendChild(r),akeebabackup.Configuration.fsBrowser.modalObject=new bootstrap.Modal(document.getElementById(akeebabackup.Configuration.fsBrowser.params.dialogId),{keyboard:!1,backdrop:"static"}),akeebabackup.Configuration.fsBrowser.modalObject.show()},parseGuiData:function(e,t){null==t&&(t=document.getElementById("akeebagui")),t.innerHTML="";var n=0;for(var o in e)if(e.hasOwnProperty(o)){var r=e[o];if(n++,!!r){var a=document.createElement("div");a.className="card mt-3 rounded-top",t.appendChild(a);var i=document.createElement("h3");i.className="card-header",i.innerHTML=o,i.id="auigrp_"+t.id+"_"+n,a.appendChild(i);var s=document.createElement("div");for(var d in s.className="card-body",a.appendChild(s),r){var l;if(r.hasOwnProperty(d)){var p=r[d],c="var["+d+"]",u=null!==(l=p.showon)&&void 0!==l?l:null,g=document.createElement("div");g.className="row mb-3",g.id="akconfigrow."+d,u&&(g.dataset.showon=JSON.stringify(u)),"hidden"!=p.type&&"none"!=p.type&&s.appendChild(g),akeebabackup.Configuration.GUI.renderOptionLabel(c,p,g);var m=document.createElement("div");m.className="col-sm-9";var f=p.type[0].toUpperCase()+p.type.slice(1),y="renderOptionType"+f;"function"==typeof akeebabackup.Configuration.GUI[y]?akeebabackup.Configuration.GUI[y](c,p,m,g,s):akeebabackup.Configuration.GUI.renderOptionTypeUnknown(c,p,m,g,s)}}}}Joomla.Showon.initialise(t)},onChangeScriptType:function(e){for(var t,n=e.options[e.selectedIndex].value,o="joomla"===n?"angie":"angie-"+n,r=document.getElementById("var[akeeba.advanced.embedded_installer]"),a=r.children,s=0;s<a.length;s++)if(t=a[s],t.value===o)return void(r.value=o)},initialisePopovers:function(){var e=Joomla.getOptions("bootstrap.popover");"object"!=typeof e||null===e||Object.keys(e).forEach(function(t){var n=e[t],o={animation:!n.animation||n.animation,container:!!n.container&&n.container,delay:n.delay?n.delay:0,html:!!n.html&&n.html,placement:n.placement?n.placement:"top",selector:!!n.selector&&n.selector,trigger:n.trigger?n.trigger:"click",offset:n.offset?n.offset:0,fallbackPlacement:n.fallbackPlacement?n.fallbackPlacement:"flip",boundary:n.boundary?n.boundary:"scrollParent",customClass:n.customClass?n.customClass:"",sanitize:!n.sanitize||n.sanitize,sanitizeFn:n.sanitizeFn?n.sanitizeFn:null,popperConfig:n.popperConfig?n.popperConfig:null};n.template&&(o.template=n.template),n.allowList&&(o.allowList=n.allowList);var r=Array.from(document.querySelectorAll(t));r.length&&r.map(function(e){new window.bootstrap.Popover(e,o)})})},onFormSubmit:e=>{var t=document.getElementById("adminForm");return!(t&&"undefined"!=typeof window.FormData&&"undefined"!=typeof Object.fromEntries&&"undefined"!=typeof JSON.stringify)||void(e.preventDefault(),akeebabackup.Configuration.submitJsonForm(JSON.stringify(Object.fromEntries(new FormData(t)))))},submitJsonForm:function(){function e(){return t.apply(this,arguments)}var t=_asyncToGenerator(_regeneratorRuntime().mark(function t(e){var n,o,r;return _regeneratorRuntime().wrap(function a(t){for(;1;)switch(t.prev=t.next){case 0:return n=new FormData,n.set("jsonForm",e),n.set(Joomla.getOptions("csrf.token"),1),n.set("task",document.forms.adminForm.task.value),o=null,t.prev=5,t.next=8,fetch(document.forms.adminForm.action,{method:"POST",body:n});case 8:if(r=t.sent,r.redirected&&(o=r.url),r.ok){t.next=12;break}throw new Error("Error found in network response");case 12:t.next=18;break;case 14:return t.prev=14,t.t0=t["catch"](5),location.reload(),t.abrupt("return");case 18:if(o){t.next=21;break}return location.reload(),t.abrupt("return");case 21:window.location=o;case 22:case"end":return t.stop()}},t,null,[[5,14]])}));return e}()});function directftp_test_connection(){akeebabackup.Configuration.FtpTest.testConnection("engine.archiver.directftp.ftp_test","engine.archiver.directftp",0)}function postprocftp_test_connection(){akeebabackup.Configuration.FtpTest.testConnection("engine.postproc.ftp.ftp_test","engine.postproc.ftp",0)}function directftpcurl_test_connection(){akeebabackup.Configuration.FtpTest.testConnection("engine.archiver.directftpcurl.ftp_test","engine.archiver.directftpcurl",1)}function postprocftpcurl_test_connection(){akeebabackup.Configuration.FtpTest.testConnection("engine.postproc.ftpcurl.ftp_test","engine.postproc.ftpcurl",1)}function directsftp_test_connection(){akeebabackup.Configuration.SftpTest.testConnection("engine.archiver.directsftp.sftp_test","engine.archiver.directsftp",0)}function postprocsftp_test_connection(){akeebabackup.Configuration.SftpTest.testConnection("engine.postproc.sftp.sftp_test","engine.postproc.sftp",0)}function directsftpcurl_test_connection(){akeebabackup.Configuration.SftpTest.testConnection("engine.archiver.directsftpcurl.sftp_test","engine.archiver.directsftpcurl",1)}function postprocsftpcurl_test_connection(){akeebabackup.Configuration.SftpTest.testConnection("engine.postproc.sftpcurl.sftp_test","engine.postproc.sftpcurl",1)}function akconfig_dropbox_openoauth(){var e=akeebabackup.Configuration.URLs.dpeauthopen;e+=-1==e.indexOf("?")?"?":"&",window.open(e+"engine=dropbox","akeeba_dropbox_window","width=1010,height=500,opener")}function akconfig_dropbox_gettoken(){akeebabackup.System.AjaxURL=akeebabackup.Configuration.URLs.dpecustomapi;var e={engine:"dropbox",method:"getauth"};akeebabackup.System.doAjax(e,function(e){""==e.error?(document.getElementById("var[engine.postproc.dropbox.token]").value=e.token.oauth_token,document.getElementById("var[engine.postproc.dropbox.token_secret]").value=e.token.oauth_token_secret,document.getElementById("var[engine.postproc.dropbox.uid]").value=e.token.uid,alert("Authentication successful!")):alert("ERROR: Could not complete authentication; please retry")},function(e){alert("ERROR: Could not complete authentication; please retry\n"+e)},!1,15e3)}function akconfig_dropbox2_openoauth(){var e=akeebabackup.Configuration.URLs.dpeauthopen;e+=-1==e.indexOf("?")?"?":"&",window.open(e+"engine=dropbox2","akeeba_dropbox2_window","width=1010,height=500,opener")}function akeeba_dropbox2_oauth_callback(e){document.getElementById("var[engine.postproc.dropbox2.access_token]").value=e.access_token,document.getElementById("var[engine.postproc.dropbox2.refresh_token]").value=e.refresh_token;var t=window.open("","akeeba_dropbox2_window");t.close()}function akconfig_onedrive_openoauth(){var e=akeebabackup.Configuration.URLs.dpeauthopen;e+=-1==e.indexOf("?")?"?":"&",window.open(e+"engine=onedrive","akeeba_onedrive_window","width=1010,height=500,opener")}function akeeba_onedrive_oauth_callback(e){document.getElementById("var[engine.postproc.onedrive.access_token]").value=e.access_token,document.getElementById("var[engine.postproc.onedrive.refresh_token]").value=e.refresh_token;var t=window.open("","akeeba_onedrive_window");t.close()}function akconfig_onedrivebusiness_openoauth(){var e=akeebabackup.Configuration.URLs.dpeauthopen;e+=-1==e.indexOf("?")?"?":"&",window.open(e+"engine=onedrivebusiness","akeeba_onedrivebusiness_window","width=1010,height=500,opener")}function akeeba_onedrivebusiness_oauth_callback(e){document.getElementById("var[engine.postproc.onedrivebusiness.access_token]").value=e.access_token,document.getElementById("var[engine.postproc.onedrivebusiness.refresh_token]").value=e.refresh_token;var t=window.open("","akeeba_onedrivebusiness_window");t.close()}function akeeba_onedrivebusiness_refreshdrives(e){if("onedrivebusiness"===document.getElementById("var[akeeba.advanced.postproc_engine]").value){e=e||{},"undefined"==typeof e["engine.postproc.onedrivebusiness.drive"]&&(e["engine.postproc.onedrivebusiness.drive"]={default:document.getElementById("var[engine.postproc.googledrive.team_drive]").value}),akeebabackup.System.AjaxURL=akeebabackup.Configuration.URLs.dpecustomapi;var t={engine:"onedrivebusiness",method:"getDrives",params:{"engine.postproc.onedrivebusiness.access_token":document.getElementById("var[engine.postproc.googledrive.access_token]").value,"engine.postproc.onedrivebusiness.refresh_token":document.getElementById("var[engine.postproc.googledrive.refresh_token]").value}};akeebabackup.System.doAjax(t,function(t){var n;if(!(null!==t&&void 0!==t&&null!==(n=t.list)&&void 0!==n&&n.length))return void alert("ERROR: Could not retrieve list of OneDrive Drives.");var o=document.getElementById("var[engine.postproc.onedrivebusiness.drive]");o.innerHTML="",t.list.forEach(t=>{var n=document.createElement("option");n.value=t[0],n.text=t[1],e["engine.postproc.onedrivebusiness.drive"]["default"]===n.value&&(n.selected=!0),o.appendChild(n)})},function(e){alert("ERROR: Could not retrieve list of OneDrive Drives. Error: \n"+e)},!1,15e3)}}function akconfig_onedriveapp_openoauth(){var e=akeebabackup.Configuration.URLs.dpeauthopen;e+=-1==e.indexOf("?")?"?":"&",window.open(e+"engine=onedriveapp","akeeba_onedriveapp_window","width=1010,height=500,opener")}function akeeba_onedriveapp_oauth_callback(e){document.getElementById("var[engine.postproc.onedriveapp.access_token]").value=e.access_token,document.getElementById("var[engine.postproc.onedriveapp.refresh_token]").value=e.refresh_token;var t=window.open("","akeeba_onedriveapp_window");t.close()}function akconfig_googledrive_openoauth(){var e=akeebabackup.Configuration.URLs.dpeauthopen;e+=-1==e.indexOf("?")?"?":"&",window.open(e+"engine=googledrive","akeeba_googledrive_window","width=1010,height=500,opener")}function akeeba_googledrive_oauth_callback(e){document.getElementById("var[engine.postproc.googledrive.access_token]").value=e.access_token,document.getElementById("var[engine.postproc.googledrive.refresh_token]").value=e.refresh_token;var t=window.open("","akeeba_googledrive_window");t.close(),akeeba_googledrive_refreshdrives()}function akeeba_googledrive_refreshdrives(e){if("googledrive"===document.getElementById("var[akeeba.advanced.postproc_engine]").value){e=e||{},"undefined"==typeof e["engine.postproc.googledrive.team_drive"]&&(e["engine.postproc.googledrive.team_drive"]={default:document.getElementById("var[engine.postproc.googledrive.team_drive]").value}),akeebabackup.System.AjaxURL=akeebabackup.Configuration.URLs.dpecustomapi;var t={engine:"googledrive",method:"getDrives",params:{"engine.postproc.googledrive.access_token":document.getElementById("var[engine.postproc.googledrive.access_token]").value,"engine.postproc.googledrive.refresh_token":document.getElementById("var[engine.postproc.googledrive.refresh_token]").value}};akeebabackup.System.doAjax(t,function(t){var n;if(console.log(t),!(null!==t&&void 0!==t&&null!==(n=t.list)&&void 0!==n&&n.length))return void alert("ERROR: Could not retrieve list of Google Drives.");var o=document.getElementById("var[engine.postproc.googledrive.team_drive]");o.innerHTML="",t.list.forEach(t=>{var n=document.createElement("option");n.value=t[0],n.text=t[1],e["engine.postproc.googledrive.team_drive"]["default"]===n.value&&(n.selected=!0),o.appendChild(n)})},function(e){alert("ERROR: Could not retrieve list of Google Drives. Error: \n"+e)},!1,15e3)}}function akconfig_box_openoauth(){var e=akeebabackup.Configuration.URLs.dpeauthopen;e+=-1==e.indexOf("?")?"?":"&",window.open(e+"engine=box","akeeba_box_window","width=1010,height=500,opener")}function akconfig_box_oauth_callback(e){document.getElementById("var[engine.postproc.box.access_token]").value=e.access_token,document.getElementById("var[engine.postproc.box.refresh_token]").value=e.refresh_token;var t=window.open("","akeeba_box_window");t.close()}akeebabackup.System.documentReady(function(){akeebabackup.Configuration.URLs=Joomla.getOptions("akeebabackup.Configuration.URLs",{}),"undefined"!=typeof akeebabackup.Configuration.URLs.dpecustomapi&&(akeebabackup.System.params.AjaxURL=akeebabackup.Configuration.URLs.dpecustomapi);var e=Joomla.getOptions("akeebabackup.Configuration.GUIData",null);null!==e&&setTimeout(function(){setTimeout(akeebabackup.Configuration.restoreDefaultPasswords,1e3),akeebabackup.Configuration.parseConfigData(Joomla.getOptions("akeebabackup.Configuration.GUIData",{})),akeebabackup.Configuration.initialisePopovers(),akeeba_googledrive_refreshdrives(akeebabackup.Configuration.engines.postproc.googledrive.parameters),akeeba_onedrivebusiness_refreshdrives(akeebabackup.Configuration.engines.postproc.onedrivebusiness.parameters);var e=document.getElementById("adminForm");e&&e.addEventListener("submit",akeebabackup.Configuration.onFormSubmit)},10)});
//# sourceMappingURL=Configuration.min.js.map