"use strict";if("undefined"==typeof akeebabackup)var akeebabackup={};"undefined"==typeof akeebabackup.Wizard&&(akeebabackup.Wizard={URLs:{},execTimes:[30,25,20,14,7,5,3],blockSizes:[240,200,160,80,40,16,4,2,1],translation:{}}),akeebabackup.Wizard.setIcon=function(a,b){var c,d,e,f,g,h,i,j,k=document.getElementById(`step-${a}-wait`),l=document.getElementById(`step-${a}-run`),m=document.getElementById(`step-${a}-done`),n=document.getElementById(`step-${a}-error`);switch(null===k||void 0===k||null===(c=k.classList)||void 0===c||c.add("d-none"),null===l||void 0===l||null===(d=l.classList)||void 0===d||d.add("d-none"),null===m||void 0===m||null===(e=m.classList)||void 0===e||e.add("d-none"),null===n||void 0===n||null===(f=n.classList)||void 0===f||f.add("d-none"),b){default:null===k||void 0===k||null===(g=k.classList)||void 0===g||g.remove("d-none");break;case"run":null===l||void 0===l||null===(h=l.classList)||void 0===h||h.remove("d-none");break;case"done":null===m||void 0===m||null===(i=m.classList)||void 0===i||i.remove("d-none");break;case"error":null===n||void 0===n||null===(j=n.classList)||void 0===j||j.remove("d-none")}},akeebabackup.Wizard.boot=function(){akeebabackup.Wizard.execTimes=[30,25,20,14,7,5,3],akeebabackup.Wizard.blockSizes=[480,400,240,200,160,80,40,16,4,2,1],document.getElementById("backup-progress-pane").style.display="block",akeebabackup.Backup.resetTimeoutBar(),akeebabackup.System.doAjax({act:"ping"},function(){akeebabackup.Wizard.flush()},function(){},!1,1e4)},akeebabackup.Wizard.flush=function(){akeebabackup.Backup.resetTimeoutBar(),akeebabackup.Backup.startTimeoutBar(3e4,100),akeebabackup.Wizard.setIcon("flush","run"),akeebabackup.System.doAjax({act:"flush"},function(a){console.log(a),akeebabackup.Wizard.setIcon("flush","done"),akeebabackup.Wizard.minExec()},function(a){console.log(a),akeebabackup.Wizard.setIcon("flush","done"),akeebabackup.Wizard.minExec()})},akeebabackup.Wizard.minExec=function(a,b){null==a&&(a=0),null==b&&(b=0),akeebabackup.Backup.resetTimeoutBar(),akeebabackup.Backup.startTimeoutBar(1e3*(2*a+5),100),document.getElementById("backup-substep").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_MINEXECTRY").replace("%s",a.toFixed(1)),akeebabackup.Wizard.setIcon("minexec","run"),akeebabackup.System.doAjax({act:"minexec",seconds:a},function(){b++,3>b?akeebabackup.Wizard.minExec(a,b):akeebabackup.Wizard.minExecApply(a)},function(){a+=.5,20<a?(document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",document.getElementById("backup-error-message").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_CANTDETERMINEMINEXEC")):akeebabackup.Wizard.minExec(a,0)},!1,1e3*(2*a+5))},akeebabackup.Wizard.minExecApply=function(a){akeebabackup.Backup.resetTimeoutBar(),akeebabackup.Backup.startTimeoutBar(25e3,100),document.getElementById("backup-substep").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_SAVEMINEXEC"),akeebabackup.System.doAjax({act:"applyminexec",minexec:a},function(){akeebabackup.Wizard.setIcon("minexec","done"),akeebabackup.Wizard.directories()},function(){akeebabackup.Wizard.setIcon("minexec","error"),document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",document.getElementById("backup-error-message").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_CANTSAVEMINEXEC")},!1)},akeebabackup.Wizard.directories=function(){akeebabackup.Backup.resetTimeoutBar(),akeebabackup.Backup.startTimeoutBar(1e4,100),document.getElementById("backup-substep").innerHTML="",akeebabackup.Wizard.setIcon("directory","run"),akeebabackup.System.doAjax({act:"directories"},function(a){return null!==a&&void 0!==a&&a.status?(akeebabackup.Wizard.setIcon("directory","done"),void akeebabackup.Wizard.database()):void(document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",document.getElementById("backup-error-message").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_CANTFIXDIRECTORIES"))},function(){akeebabackup.Wizard.setIcon("directory","error"),document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",document.getElementById("backup-error-message").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_CANTFIXDIRECTORIES")},!1)},akeebabackup.Wizard.database=function(){akeebabackup.Backup.resetTimeoutBar(),akeebabackup.Backup.startTimeoutBar(3e4,50),document.getElementById("backup-substep").innerHTML="",akeebabackup.Wizard.setIcon("dbopt","run"),akeebabackup.System.doAjax({act:"database"},function(){akeebabackup.Wizard.setIcon("dbopt","done"),akeebabackup.Wizard.maxExec()},function(){akeebabackup.Wizard.setIcon("dbopt","error"),document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",document.getElementById("backup-error-message").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_CANTDBOPT")},!1)},akeebabackup.Wizard.maxExec=function(){var a=akeebabackup.Wizard.execTimes.shift();return 0===akeebabackup.Wizard.execTimes.length||null==a?(document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",void(document.getElementById("backup-error-message").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_EXECTOOLOW"))):void(akeebabackup.Backup.resetTimeoutBar(),akeebabackup.Backup.startTimeoutBar(1e3*(1.2*a),80),akeebabackup.Wizard.setIcon("maxexec","run"),document.getElementById("backup-substep").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_MINEXECTRY").replace("%s",a.toFixed(0)),akeebabackup.System.doAjax({act:"maxexec",seconds:a},function(b){null!==b&&void 0!==b&&b.status?akeebabackup.Wizard.maxExecApply(a):akeebabackup.Wizard.maxExec()},function(){akeebabackup.Wizard.maxExec()},!1,38e3))},akeebabackup.Wizard.maxExecApply=function(a){akeebabackup.Backup.resetTimeoutBar(),akeebabackup.Backup.startTimeoutBar(1e4,100),document.getElementById("backup-substep").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_SAVINGMAXEXEC"),akeebabackup.System.doAjax({act:"applymaxexec",seconds:a},function(){akeebabackup.Wizard.setIcon("maxexec","done"),akeebabackup.Wizard.partSize()},function(){akeebabackup.Wizard.setIcon("maxexec","error"),document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",document.getElementById("backup-error-message").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_CANTSAVEMAXEXEC")})},akeebabackup.Wizard.partSize=function(){akeebabackup.Backup.resetTimeoutBar();var a=akeebabackup.Wizard.blockSizes.shift();if(0===akeebabackup.Wizard.blockSizes.length||null==a)return document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",void(document.getElementById("backup-error-message").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_CANTDETERMINEPARTSIZE"));akeebabackup.Backup.startTimeoutBar(3e4,100),document.getElementById("backup-substep").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_PARTSIZE").replace("%s",(a/8).toFixed(3)),akeebabackup.Wizard.setIcon("splitsize","run"),akeebabackup.System.doAjax({act:"partsize",blocks:a},function(a){return null!==a&&void 0!==a&&a.status?(akeebabackup.Wizard.setIcon("splitsize","done"),void akeebabackup.Wizard.done()):void akeebabackup.Wizard.partSize()},function(){akeebabackup.Wizard.partSize()},!1,6e4)},akeebabackup.Wizard.done=function(){document.getElementById("backup-progress-pane").style.display="none",document.getElementById("backup-complete").style.display="block"},akeebabackup.System.documentReady(function(){akeebabackup.Wizard.boot()});
//# sourceMappingURL=ConfigurationWizard.min.js.map